<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Distributed System the BEAM way</title>

    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/night.css">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css">
</head>

<body>
    <div class="reveal">
        <div class="slides">
            <!-- Title Slide -->
            <section data-background-color="white">
                <img width="200" src="https://learnyousomeerlang.com/static/img/cbttf.png" />
                <h3>Distributed System</h3>
                <blockquote style="color: black; font-weight: 800;">
                    "The BEAM way"
                </blockquote>
            </section>

            <!-- What is a Distributed System? -->
            <section data-background-color="#ffffff">
                <h3>What is a Distributed System?</h3>
                <blockquote style="color: black; font-weight: 800;">
                    â€œA distributed system is just many computers pretending to be one big computer.â€
                </blockquote>
            </section>

        <section>
            <h3>The Single Machine Problem</h3>
            <div style="display: flex; justify-content: space-around; margin-top: 30px;">
                <div style="text-align: center;">
                    <span style="font-size: 3em;">ğŸ’¥</span>
                    <p><strong>Single Point<br/>of Failure</strong></p>
                    <p style="font-size: 0.7em; color: #ef5350;">1 crash = game over</p>
                </div>
                <div style="text-align: center;">
                    <span style="font-size: 3em;">ğŸ“ˆ</span>
                    <p><strong>Can't Scale</strong></p>
                    <p style="font-size: 0.7em; color: #ef5350;">Limited CPU/RAM</p>
                </div>
                <div style="text-align: center;">
                    <span style="font-size: 3em;">ğŸŒ</span>
                    <p><strong>Geography</strong></p>
                    <p style="font-size: 0.7em; color: #ef5350;">Far users = slow</p>
                </div>
            </div>
        </section>

        <!-- Slide 2: The Solution -->
        <section>
            <h3>Why Go Distributed?</h3>
            <div style="display: flex; justify-content: space-around; margin-top: 30px;">
                <div style="text-align: center;">
                    <span style="font-size: 3em;">ğŸ›¡ï¸</span>
                    <p><strong>Fault Tolerance</strong></p>
                    <p style="font-size: 0.7em; color: #66bb6a;">Node dies? Others continue!</p>
                </div>
                <div style="text-align: center;">
                    <span style="font-size: 3em;">ğŸš€</span>
                    <p><strong>Horizontal Scale</strong></p>
                    <p style="font-size: 0.7em; color: #66bb6a;">Add nodes = more power</p>
                </div>
                <div style="text-align: center;">
                    <span style="font-size: 3em;">âš¡</span>
                    <p><strong>Low Latency</strong></p>
                    <p style="font-size: 0.7em; color: #66bb6a;">Nodes close to users</p>
                </div>
            </div>
        </section>

   <section>
                <h3>Distributed Concepts in Real Life ğŸŒ</h3>
                <div style="display: flex; justify-content: space-around; text-align: center;">
                    <div>
                        <span style="font-size: 3em;">ğŸ®</span>
                        <h4>Discord</h4>
                        <p style="font-size: 0.7em; color: #90caf9;"><strong>Pub/Sub</strong></p>
                        <p style="font-size: 0.6em;">Message â†’ broadcast<br/>to all listeners</p>
                    </div>
                    <div>
                        <span style="font-size: 3em;">ğŸ“</span>
                        <h4>Google Docs</h4>
                        <p style="font-size: 0.7em; color: #a5d6a7;"><strong>CRDTs</strong></p>
                        <p style="font-size: 0.6em;">Conflict-free<br/>data merge</p>
                    </div>
                    <div>
                        <span style="font-size: 3em;">ğŸš—</span>
                        <h4>Grab/Uber</h4>
                        <p style="font-size: 0.7em; color: #ffab91;"><strong>Consistency</strong></p>
                        <p style="font-size: 0.6em;">1 driver can't accept<br/>2 rides at once</p>
                    </div>
                </div>
            </section>

        <section data-background-color="#ffffff">
            <img width="150" src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/04/Erlang_logo.svg/140px-Erlang_logo.svg.png" />
            <h3>The Erlang Legacy</h3>
            <ul>
                <li>1980s at Ericsson</li>
                <li>Built for telecom: needed to handle millions of calls, never crash!</li>
                <li>Superpowers: Concurrency, Fault tolerance, Distribution</li>
            </ul>
        </section>

        <section>
            <img width="180" style="border-radius: 50%;" src="https://2023.elixirconf.com/images/presenters/jose-valim.jpg" />
            <h3>JosÃ© Valim</h3>
            <p style="font-size: 0.8em; color: #aaa;">Creator of Elixir, former Rails core team</p>
            <blockquote style="font-size: 0.95em; margin-top: 20px; border-left: 4px solid #9c27b0;">
                "I loved Ruby, but I needed better concurrency and distribution. <br/>
                I found everything I wanted in the Erlang VM."
            </blockquote>
        </section>

        <section>
            <h3>Why BEAM is Cool? âœ¨</h3>
            <div style="display: flex; justify-content: space-around; text-align: center; margin-top: 20px;">
                <div>
                    <span style="font-size: 2.5em;">ğŸ£</span>
                    <p style="font-size: 0.8em;"><strong>Lightweight</strong><br/>Millions of processes</p>
                </div>
                <div>
                    <span style="font-size: 2.5em;">ğŸ“¬</span>
                    <p style="font-size: 0.8em;"><strong>Message Passing</strong><br/>No shared memory</p>
                </div>
                <div>
                    <span style="font-size: 2.5em;">ğŸš¨</span>
                    <p style="font-size: 0.8em;"><strong>Let It Crash</strong><br/>Supervisors restart</p>
                </div>
                <div>
                    <span style="font-size: 2.5em;">ğŸŒ</span>
                    <p style="font-size: 0.8em;"><strong>Built-in Dist</strong><br/><code style="font-size: 0.7em;">Node.connect/1</code></p>
                </div>
            </div>
        </section>

        <section>
            <h3>Why BEAM Excels at Distribution ğŸš€</h3>
            <div style="display: flex; justify-content: space-around; text-align: center; margin-top: 20px;">
                <div>
                    <span style="font-size: 2.5em;">ğŸ”—</span>
                    <h4 style="font-size: 0.9em;">Built-in Clustering</h4>
                    <p style="font-size: 0.6em;">Nodes connect with<br/>one line of code</p>
                </div>
                <div>
                    <span style="font-size: 2.5em;">ğŸ“</span>
                    <h4 style="font-size: 0.9em;">Location Transparency</h4>
                    <p style="font-size: 0.6em;">Send message to process<br/>local or remote = same!</p>
                </div>
                <div>
                    <span style="font-size: 2.5em;">ğŸ’€</span>
                    <h4 style="font-size: 0.9em;">Failure Detection</h4>
                    <p style="font-size: 0.6em;">Node dies?<br/>Others know instantly</p>
                </div>
            </div>
            <div style="background: #e8f5e9; color: #2e7d32; border-left: 6px solid #4caf50; padding: 12px; margin-top: 20px; font-weight: 600; border-radius: 6px; font-size: 0.8em;">
                ğŸ§  <strong>Key:</strong> Same code works for 1 node or 100 nodes!
            </div>
        </section>

        <section>
            <h4>Why are distributed systems hard? ğŸ¤¯</h4>
            <ul>
              <li>Unreliable networks ğŸŒ</li>
              <li>Some parts can fail ğŸ’¥</li>
              <li>Keeping data in sync ğŸ”„</li>
              <li>Conflicting changes âš”ï¸</li>
              <li>Slow coordination ğŸ¢</li>
              <li>Hard to debug ğŸ</li>
            </ul>
        </section>
        <section>
            <h3>Why Elixir Makes Distributed Easy? ğŸ¯</h3>
            <p style="font-size: 1.2em;">Because you <strong>already learned it!</strong></p>
            <div style="font-size: 0.85em; margin-top: 30px; text-align: left; max-width: 600px; margin-left: auto; margin-right: auto;">
                <p>âœ… Process = isolated unit â†’ <strong>Node = isolated unit</strong></p>
                <p>âœ… Message passing â†’ <strong>same across nodes</strong></p>
                <p>âœ… Supervisor restart â†’ <strong>works for remote too</strong></p>
                <p>âœ… Let it crash â†’ <strong>let the node crash</strong></p>
            </div>
        </section>

        <section data-background-color="#ffffff">
            <h3>Newjeans Stage</h3>
            <img width="900" src="image/newjeans_process_stage.png" />
        </section>

        <section data-background-color="#ffffff">
            <h3>Newjeans State in Distributed System</h3>
            <img width="900" src="image/distributed_newjeans.png" />
        </section>

        <section>
            <h3>âš¡ Basic Distributed System in Elixir</h3>
            <ul>
              <li>Start nodes: <code>iex --sname node1 -S mix</code></li>
              <li>Connect nodes: <code>Node.connect(:'node2@host')</code></li>
              <li>Check nodes: <code>Node.list()</code></li>
              <li>Run remote call: <code>Node.spawn(:'node2@host', fn -> IO.puts("Hi") end)</code></li>
              <li>Share state: use <code>:global</code> / <code>:pg</code> / libraries (e.g., DeltaCrdt)</li>
            </ul>
        </section>


        <section data-background-color="#ffffff">
          <h3>Distributed Counter 3 Node</h3>
          <img width="900" src="image/counter_3_node.png" />
        </section>

        <section>
            <h3>3 Nodes Counting Together</h3>
            <div style="font-size: 0.9em; text-align: left; max-width: 650px; margin: 20px auto;">
                <p>ğŸª <strong>3 shops</strong> in different cities</p>
                <p>ğŸ“Š Each shop counts <strong>its own sales</strong></p>
                <p>ğŸ“µ Sometimes internet goes down</p>
                <p>ğŸ”„ When online â†’ <strong>sync & merge</strong></p>
            </div>
            <div style="display: flex; justify-content: space-around; margin-top: 30px;">
                <div style="background: #1e88e5; padding: 15px 25px; border-radius: 10px;">
                    ğŸª A: <strong>+2</strong>
                </div>
                <div style="font-size: 2em;">+</div>
                <div style="background: #43a047; padding: 15px 25px; border-radius: 10px;">
                    ğŸª B: <strong>+3</strong>
                </div>
                <div style="font-size: 2em;">+</div>
                <div style="background: #fb8c00; padding: 15px 25px; border-radius: 10px;">
                    ğŸª C: <strong>+1</strong>
                </div>
                <div style="font-size: 2em;">=</div>
                <div style="background: #7b1fa2; padding: 15px 25px; border-radius: 10px;">
                    Total: <strong>6</strong>
                </div>
            </div>
            <p style="margin-top: 25px; font-size: 0.85em; color: #aaa;">
                This is how <strong>G-Counter CRDT</strong> works! 
            </p>
        </section>

        <section>
            <h3>What is G-Counter (CRDT)?</h3>
            <p style="font-size: 0.9em;">Each node keeps its <strong>own counter</strong>, then we <strong>merge</strong> them!</p>
            <div style="display: flex; justify-content: space-around; margin-top: 30px; text-align: center;">
                <div style="background: #1e88e5; padding: 15px; border-radius: 10px;">
                    <p><strong>Node1</strong></p>
                    <code>{node1: 2, node2: 0, node3: 0}</code>
                </div>
                <div style="background: #43a047; padding: 15px; border-radius: 10px;">
                    <p><strong>Node2</strong></p>
                    <code>{node1: 0, node2: 3, node3: 0}</code>
                </div>
                <div style="background: #fb8c00; padding: 15px; border-radius: 10px;">
                    <p><strong>Node3</strong></p>
                    <code>{node1: 0, node2: 0, node3: 1}</code>
                </div>
            </div>
            <div style="margin-top: 30px;">
                <p style="font-size: 1.2em;">â¬‡ï¸ <strong>Merge = take max of each</strong> â¬‡ï¸</p>
                <code style="font-size: 1.1em; background: #7b1fa2; padding: 10px; border-radius: 5px;">
                    {node1: 2, node2: 3, node3: 1} â†’ Total = <strong>6</strong>
                </code>
            </div>
        </section>

        <section>
          <h3>Increament Counter (Sync)</h3>
  <div class="mermaid" style="width: auto; height: 500px; overflow-y: auto; margin: 0 auto;"
            <pre>
              %%{init: {'theme': 'dark', 'themeVariables': { 'darkMode': true }}}%%
sequenceDiagram
    participant Node1
    participant Node2
    participant Node3

    %% Initial state
    Node1->>Node1: Counter = 0
    Node2->>Node2: Counter = 0
    Node3->>Node3: Counter = 0

    %% Node1 increments
    Node1->>Node1: Counter = Counter + 1
    Node1->>Node2: Sync delta
    Node1->>Node3: Sync delta

    %% Node2 increments
    Node2->>Node2: Counter = Counter + 1
    Node2->>Node1: Sync delta
    Node2->>Node3: Sync delta

    %% Node3 increments
    Node3->>Node3: Counter = Counter + 1
    Node3->>Node1: Sync delta
    Node3->>Node2: Sync delta

    %% Final state after all syncs
    Node1->>Node1: Counter = 3
    Node2->>Node2: Counter = 3
    Node3->>Node3: Counter = 3
            </pre>
          </div>
        </section>

        <section>
          <h3>Increament Counter (Offline)</h3>
  <div class="mermaid" style="width: auto; height: 500px; overflow-y: auto; margin: 0 auto;"
            <pre>
              %%{init: {'theme': 'dark', 'themeVariables': { 'darkMode': true }}}%%
sequenceDiagram
    participant Node1
    participant Node2
    participant Node3

    %% Initial state
    Node1->>Node1: Counter = 0
    Node2->>Node2: Counter = 0
    Node3->>Node3: Counter = 0 (offline)

    %% Node1 increments
    Node1->>Node1: Counter = Counter + 1

    %% Sync delta to Node2 only
    Node1->>Node2: Sync delta
    Node2->>Node2: Counter = 1

    %% Node3 comes online and syncs with Node1 or Node2
    Node3-->>Node1: Request latest delta
    Node1->>Node3: Send delta
    Node3->>Node3: Counter = 1

    %% Final state
    Node1->>Node1: Counter = 1
    Node2->>Node2: Counter = 1
    Node3->>Node3: Counter = 1

            </pre>
          </div>
        </section>

        <section>
            <h2>Demo</h2>
            <img width="200" src="https://media1.tenor.com/m/R1TTUaq_hMcAAAAC/haerin-newjeans.gif" />
        </section>

        <section>
            <img width="200" src="https://media1.tenor.com/m/OT9Am8Bg9-cAAAAd/haerin-newjeans.gif" />
            <h2>Summary</h2>
            <blockquote>
                â€œErlang/Elixir makes distributed systems... simple.â€ ğŸ¦¸â€â™‚ï¸ğŸ’¥
            </blockquote>
        </section>

        <section>
            <img width="250" src="https://media1.tenor.com/m/Y9KOdmb6uBAAAAAd/haerin-newjeans.gif" />
            <h4>
                "Don't drink too much Kool-Aid"
            </h4>
            <h3>|> QA |> exit(0)</h3>
        </section>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js-mermaid-plugin@11.4.1/plugin/mermaid/mermaid.js"></script>
    <script>
        // More info about initialization & config:
        // - https://revealjs.com/initialization/
        // - https://revealjs.com/config/
        Reveal.initialize({
            hash: true,
            mermaid: {
            },

            // Learn about plugins: https://revealjs.com/plugins/
            plugins: [RevealMarkdown, RevealHighlight, RevealNotes, RevealMermaid]
        });
    </script>
</body>

</html>
